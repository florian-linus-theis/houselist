<nav class="navbar navbar-light fixed-top" data-layout-target="navbar">
  <div class="d-flex">
    <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasDarkNavbar" aria-controls="offcanvasDarkNavbar">
      <i class="menu-icon fa-solid fa-bars" style="color: #FDFDFD;"></i>
    </button>
    <a class="navbar-brand" href="/">
      <%= image_tag "houselist_logo_font.png", alt: "houselist", width: 50, class: "navbar-logo" %>
    </a>
    <div class="profile-menu">
      <% if current_page?(profile_path) %>
        <div></div>
      <% elsif current_user.photo.attached? %>
        <%= cl_image_tag current_user.photo.key, class: "profile-pic-nav mr-3", :gravity => "face", :height => 60, :width => 60, :crop => "thumb" %>
      <% else %>
        <%= image_tag "houselist_default_profile_pic.jpg", alt: "default image", width: 60, height: 60, class: "profile-pic-nav mr-3" %>
      <% end %>
    </div>
    <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasDarkNavbar" aria-labelledby="offcanvasDarkNavbarLabel">
      <div class="offcanvas-header">
        <button type="button" class="btn-close btn-x-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      <div class="offcanvas-body">
        <div class="background-profile w-100">
          <% if current_user %>
            <% if current_user.photo.attached? %>
              <%= cl_image_tag current_user.photo.key, class: "rounded-circle mr-3", :gravity => "face", :height => 100, :width => 100, :crop => "thumb" %>
            <% else %>
              <%= image_tag "houselist_default_profile_pic.jpg", alt: "default image", width: 100, height: 100, class: "rounded-circle mr-3" %>
            <% end %>
            <p class="menu-email"><%= current_user.email %></p>
          </div>
          <ul class="navbar-nav pe-3">
            <li class="nav-item d-flex justify-content-between">
              <a class="menu-item" href="/flats"><i class="fa-solid fa-house"></i>My flats</a>
              <a class="arrow" href="/flats">></a>
            </li>
            <hr/>
            <li class="nav-item d-flex justify-content-between">
              <a class="menu-item" href="/profile"><i class="fa-solid fa-user"></i> My profile</a>
              <a class="arrow" href="/flats">></a>
            </li>
            <hr/>
            <li class="nav-item d-flex justify-content-between">
              <a class="menu-item" data-turbo-method="delete" href="/users/sign_out"><i class="fa-solid fa-right-from-bracket"></i>Logout</a>
              <a class="arrow" href="/flats">></a>
            </li>
          </ul>
          <%= image_tag "houselist_logo_font.png", alt: "houselist", width: 50, class: "offcanvas-logo" %>
        <% end %>
      </div>
    </div>
  </div>
</nav>
